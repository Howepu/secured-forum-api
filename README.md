# Secured Forum API

Защищенный REST API сервис для форума с системой аутентификации и авторизации, построенный на Spring Boot.

## Технологии

- **Java 21**
- **Spring Boot 3.5.3**
- **Spring Security** - Защита API с JWT аутентификацией и OAuth2
- **Spring Data JPA** - Взаимодействие с базой данных
- **PostgreSQL** - Основная база данных
- **Liquibase** - Миграции базы данных
- **Lombok** - Уменьшение шаблонного кода
- **MapStruct** - Маппинг между DTO и сущностями
- **Docker** - Контейнеризация приложения

## Функциональность

- Регистрация и аутентификация пользователей
- Управление пользовательскими ролями и правами доступа
- CRUD операции для постов
- Комментарии к постам
- Обработка исключений и возврат информативных ошибок

## Предварительные требования

- JDK 21
- Maven
- Docker и Docker Compose (для запуска в контейнерах)
- PostgreSQL (если запуск без Docker)

## Запуск приложения

### С использованием Docker

```bash
# Сборка проекта
mvn clean package -DskipTests

# Запуск через Docker Compose
docker-compose up -d
```

### Локально

```bash
# Настройте соединение с PostgreSQL в application.properties
mvn spring-boot:run
```

## API Endpoints

### Аутентификация
- `POST /api/auth/register` - Регистрация нового пользователя
- `POST /api/auth/login` - Авторизация и получение JWT токена

### Посты
- `GET /api/posts` - Получение всех постов
- `GET /api/posts/{id}` - Получение поста по ID
- `POST /api/posts` - Создание нового поста
- `PUT /api/posts/{id}` - Обновление поста
- `DELETE /api/posts/{id}` - Удаление поста

### Комментарии
- `GET /api/posts/{postId}/comments` - Получение комментариев к посту
- `POST /api/posts/{postId}/comments` - Добавление комментария к посту

### Пользователи
- `GET /api/users` - Получение списка пользователей (только для администраторов)
- `GET /api/users/{id}` - Получение информации о пользователе

## Безопасность

API защищен с использованием JWT токенов. Для большинства запросов требуется авторизация через HTTP заголовок:

```
Authorization: Bearer {ваш_jwt_токен}
```

## Разработка

Проект использует стандартную структуру Spring Boot приложения:

- `models` - Сущности базы данных
- `repositories` - Spring Data репозитории
- `services` - Бизнес-логика
- `controllers` - REST эндпоинты
- `dto` - Объекты передачи данных
- `security` - Настройки безопасности
- `exception` - Обработка исключений
- `config` - Конфигурационные классы

## Лицензия

MIT
